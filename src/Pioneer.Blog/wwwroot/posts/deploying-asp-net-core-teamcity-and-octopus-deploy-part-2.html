<!doctype html>
<html class="no-js" lang="">
<head>
  <link href="/app.css" rel="stylesheet" />
  <script src="/app.js"></script>
</head>
<body>
  <div class="row">
    <div class="large-10 large-push-1 columns">
      <h1>Deploying An ASP.NET Core Site With TeamCity And Octopus Deploy: You're Still Doing It Wrong - TeamCity</h1>
      <article>
        <div class="note">
          <p>This day and age, predictability and reliability are two of the most important words when it comes deployment. In this series I am going to talk about how to add predictability and reliability to your ASP.NET Core deployment pipeline using TeamCity and Octopus Deploy.</p>
          <ol style="margin-bottom: 0;">
            <li><a href="deploying-asp-net-core-teamcity-and-octopus-deploy-part-1">Intro</a></li>
            <li><a href="deploying-asp-net-core-teamcity-and-octopus-deploy-part-2">TeamCity</a></li>
            <li><a href="deploying-asp-net-core-teamcity-and-octopus-deploy-part-3">Database Migrations</a></li>
            <li><a href="deploying-asp-net-core-teamcity-and-octopus-deploy-part-4">Octopus Deploy</a></li>
            <li><a href="deploying-asp-net-core-teamcity-and-octopus-deploy-part-5">Putting It All Together</a></li>
          </ol>
        </div>
        <p>In the previous post to this series, we talked about our desires to become more predictable and reliable through automation. We also touched on some of the prerequisites needed to accomplish this using the methods defined in this series. In this post we will dive into creating the bases of a Continuous Integration pipeline by setting up <a href="https://www.jetbrains.com/teamcity/" title="TeamCity" target="_blank">TeamCity</a> to serve our build server needs.</p>
        <h2>Wait, You Build Deployments Locally?</h2>
        <p>Building deployments out of your local source is for a lack of better words, a <b>terrible</b> idea. It is riddle with problems such as...</p>
        <ul>
          <li>
            Isolation
            <ul>
              <li>When building form x-number of environments, you are introducing x-number of variables that may or may not have an effect on the final build that is outputted.</li>
              <li>By Isolating the environment to a single point of entry (repository) and single point of exit (build server), you are removing the "it works on my machine" from the equation. </li>
            </ul>
          </li>
          <li>
            Traceable
            <ul>
              <li>When a build fails, we need to be able to trace its origination to determine what went wrong.</li>
              <li>If we are building from x-amount of entry points, we don't have a clear path to that origin.</li>
              <li>If we do not have a clear path to the origin, we don't have a clear definition of the state of code and by way of cannot say reliably say what caused any given issue.</li>
            </ul>
          </li>
          <li>
            Developer Alignment
            <ul>
              <li>If you are not using a single entry points for your build process, you are introducing the possibility of the state of code to not be aligned with the exceptions of multiple developers.</li>
              <li>
                For example, black-box developer A is working on feature B.  Black-box developer C is working on feature D and does not know about feature B.
                <ul>
                  <li>If developer C is responsible for producing a build for deployment, feature B will not be in said deployment.</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
        <p>To be honest, this list can go one for a very long time. A simple Google search will pull up a exhaustive list of reasons why build servers building from a single source of truth is a desired practice. Point being, if you are not doing such then you are definitely <b>still doing it wrong</b>.</p>
        <h2>Installation</h2>
        <p>TeamCity these day is super easy to install.  You have one of two option, install it using the <a href="https://www.jetbrains.com/teamcity/download/#section=windows" title="TeamCity Installer" target="_blank">TeamCity Installer</a> or do it like a modern developer would and use <a href="https://chocolatey.org/" title="Chocolatey" target="_blank">Chocolatey</a>.  I went the Chocolatey route and ran the following command.</p>
        <pre class="brush: bash">choco install teamcity</pre>
        <p>Once installed head over to <b>http://localhost:8111</b> and follow the prompts.</p>
        <p>Set the location where TeamCity will store it's meta data on disk.</p>
        <a href="/images/deploying-asp-net-core-teamcity-and-octopus-deploy/team-1.jpg" title="TeamCity Directory" target="_blank">
          <img src="/images/deploying-asp-net-core-teamcity-and-octopus-deploy/team-1.jpg" alt="TeamCity Directory" style="max-width: 805px; border: 1px solid #ccc;"/>
        </a>
        <p>Make your connection to the database you want TeamCity to use.</p>
        <a href="/images/deploying-asp-net-core-teamcity-and-octopus-deploy/team-2.jpg" title="TeamCity Database" target="_blank">
          <img src="/images/deploying-asp-net-core-teamcity-and-octopus-deploy/team-2.jpg" alt="TeamCity Database" style="max-width: 805px; border: 1px solid #ccc;"/>
        </a>
        <p>It will take a minute or two to initialize the rest of TeamCity components but once it is done, you will be asked to accept a licensing agreement and create an administrator account. After you have finish creating an account, you will end up logged into the TeamCity portal.</p>
        <h2>Create A Project</h2>
        <h2>Up Next</h2>
      </article>
    </div>
  </div>
</body>
</html>